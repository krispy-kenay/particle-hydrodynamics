<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <style>
            body { margin: 0;}
        </style>
        <link rel="stylesheet" href="styles/theme.css">
        <link rel="stylesheet" href="styles/simulation.css">
        <!-- Styles -->
        <script type="importmap">
            {"imports": {"three": "https://cdn.jsdelivr.net/npm/three@0.164.1/build/three.module.js","three/addons/": "https://cdn.jsdelivr.net/npm/three@0.164.1/examples/jsm/"}}
        </script>
    </head>
    <body>
        <!-- Simulation controls-->
        <div class="controls">
            <div class="player" id="playButton" onclick="togglePlay()"></div>
            <div id="resetButton" onclick="initializePositions()">Reset</div>
            
        </div>
        <!-- Canvas element containing the simulation -->
        <div class="settings">
            <h1>Settings</h1>
            <hr/>
            <h2>Parameters</h2>
            <div class="option">
                <h3>Number of Particles</h3>
                <div class="slider"><input type="range" min="0" max="3000" value="200" id="" oninput="setNumParticles(this)"><span></span></div>
                <p>Warning: has a very big performance impact, highest recommendation on normal hardware is ~1000</p>
            </div>
            <div class="option">
                <h3>Gravity</h3>
                <div class="slider"><input type="range" min="0" max="200" value="0" id="" oninput="setGravity(this)"><span></span></div>
                <!--<p>Strength of gravitational acceleration</p>-->
            </div>
            <div class="option">
                <h3>Particle Mass</h3>
                <div class="slider"><input type="range" min="0" max="200" value="100" id="" oninput="setMass(this)"><span></span></div>
                <!--<p>Set the mass of each particle</p>-->
            </div>
            <div class="option">
                <h3>Interaction Radius</h3>
                <div class="slider"><input type="range" min="0" max="200" value="50" id="" oninput="setSmoothingRadius(this)"><span></span></div>
                <p>Range in which the Particles can Interact</p>
            </div>
            <div class="option">
                <h3>Target Density</h3>
                <div class="slider"><input type="range" min="0" max="200" value="10" id="" oninput="setTargetDensity(this)"><span></span></div>
                <p>Desired density</p>
            </div>
            <div class="option">
                <h3>Pressure Multiplier</h3>
                <div class="slider"><input type="range" min="0" max="200" value="10" id="" oninput="setPressureMultiplier(this)"><span></span></div>
                <p>How much force the particles will experience to bring them to the desired density</p>
            </div>
            <div class="option">
                <h3>Viscosity</h3>
                <div class="slider"><input type="range" min="0" max="200" value="0" id="" oninput="setViscosityStrength(this)"><span></span></div>
                <p>Internal force friction coefficient</p>
            </div>
            <hr/>
            <h2>Visualization</h2>
            <div class="toggle">
                <h3>Show Velocity</h3>
                <div class="chkbox">
                    <label for="velocity">
                        <input type="checkbox" id="velocity" onchange="showVelocity(this)" checked="checked"/>
                        <div></div>
                    </label>
                </div>
                <p><span style="color: #2736b9;">&#9632;</span><span style="color: #1cd4a9;">&#9632;</span><span style="color: #f8f135;">&#9632;</span><span style="color: #e48315;">&#9632;</span> Low to high speed</p> 
            </div>
            <div class="toggle">
                <h3>Show Interaction</h3>
                <div class="chkbox">
                    <label for="smoothRadius">
                        <input type="checkbox" id="smoothRadius" onchange="showSmoothingRadius(this)"/>
                        <div></div>
                    </label>
                </div>
                <p><span style="color: #9c0008;">&#9632;</span> Local density > target density</p>
                <p><span style="color: #1303fc;">&#9632;</span> Local density < target density</p>
            </div>
        </div>
        <!-- Scripts -->
        <!--<script type="module" src="/scripts/scene.js"></script>-->
        <script type="module" src="/main.js"></script>
        <script type="text/javascript" src="./scripts/helper.js"></script>
        <script>
            var running = false;
            const box_x = 100;
            const box_y = 100;
            const box_z = 200;
            var gravity = 800;
            var targetDensity = 0;
            var pressureMultiplier = 100000;
            var nearPressureMultiplier = 0;
            var particleRadius = 3;
            var SmoothingRadius = 20;
            const timestep = 0.01;
            function togglePlay() {
                running = !running;
            }
        </script>
    </body>
</html>